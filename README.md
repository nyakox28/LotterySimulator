# 宝くじシミュレーター

番号ベースの抽選によって当せんを判定する宝くじシミュレーター。確率値を直接使用せず、実際の宝くじと同様に番号の一致によって当せんを判定します。

## 特徴

- **番号ベースの抽選**: 確率値を使用せず、組番号と下5桁番号による完全な番号一致判定
- **連番とバラに対応**: 実際の宝くじと同じ購入方法をサポート
- **詳細な当せん判定**: 1等から7等までの全等級を正確に判定
- **再現可能な乱数**: シード値を指定することで結果を再現可能

## 仕様

### 基本設定

- **組番号**: 1〜200（全200組）
- **下5桁番号**: 00000〜99999（各組10万枚）
- **1セット**: 10枚（3,000円）
- **最大購入**: 33セットまで

### 購入方法

**連番セット**
- 同一の組番号
- 連続する下5桁10枚
- 例: 012組 34560〜34569

**バラセット**
- すべて異なる組番号（10枚で10組）
- 下1桁が0〜9すべて含まれる
- 番号は連続しない

### 当せん条件と賞金

| 等級 | 条件 | 賞金 |
|------|------|------|
| 1等 | 組番号+下5桁完全一致 | 7億円 |
| 1等前後賞 | 組番号一致+下5桁±1 | 1億5千万円 |
| 2等 | 組番号一致+下4桁一致 | 1千万円 |
| 3等 | 下4桁一致 | 100万円 |
| 4等 | 下3桁一致 | 5万円 |
| 5等 | 下2桁一致 | 1万円 |
| 6等 | 下1桁一致 | 3千円 |
| 7等 | 指定下1桁一致 | 300円 |

**注意事項**:
- 1枚のくじが複数の等級を満たす場合、最高等級のみ適用
- 前後賞は1等とは別枠だが、同一くじが両方を受賞することはない
- 下5桁が00000未満または99999超の前後賞は無効

## 使い方

### 基本的な使用方法

```bash
python3 lottery_simulator.py
```

実行すると、連番とバラのセット数を入力するプロンプトが表示されます。

### 実行例

```
$ python3 lottery_simulator.py
============================================================
宝くじシミュレーター
============================================================

連番セット数を入力してください（0以上の整数）: 5
バラセット数を入力してください（0以上の整数）: 5

============================================================
宝くじシミュレーション結果
============================================================

【1等当せん番号】: 129組 78900
【7等該当下1桁】: 4

【連番】
  5等: 1枚 (10,000円 × 1 = 10,000円)
  6等: 4枚 (3,000円 × 4 = 12,000円)
  7等: 5枚 (300円 × 5 = 1,500円)
  獲得賞金合計: 23,500円

【バラ】
  6等: 5枚 (3,000円 × 5 = 15,000円)
  7等: 5枚 (300円 × 5 = 1,500円)
  獲得賞金合計: 16,500円

【全体】
  総購入セット数: 10セット
    - 連番: 5セット
    - バラ: 5セット
  総購入金額: 30,000円
  総当せん金額: 40,000円
  収支: +10,000円

============================================================
```

### テストの実行

包括的なテストスイートが含まれています。

```bash
python3 test_lottery.py
```

テストでは以下を検証します：
- 連番セットの正しい生成（同一組、連続番号）
- バラセットの正しい生成（異なる組、下1桁0-9、非連続）
- すべての等級の当せん判定
- エッジケース（00000、99999の前後賞）
- 最大セット数の制限

### プログラムから使用

```python
from lottery_simulator import LotterySimulator

# シミュレーター初期化（再現性のためシード指定可能）
sim = LotterySimulator(seed=42)

# くじ購入（連番3セット、バラ2セット）
sim.purchase_tickets(renban_sets=3, bara_sets=2)

# 抽選実行
sim.draw_winning_number()

# 当せん判定
results = sim.check_all_prizes()

# 結果表示
sim.display_results(results)
```

## ファイル構成

```
.
├── lottery_simulator.py  # メインプログラム
├── test_lottery.py       # テストスイート
└── README.md            # このファイル
```

## 実装の詳細

### 番号ベースの抽選

このシミュレーターは、確率値（例: 1/20,000,000）を直接使用せず、以下の方法で抽選を行います：

1. **1等当せん番号の決定**
   - 組番号を1〜200からランダムに1つ選択
   - 下5桁番号を0〜99999からランダムに1つ選択

2. **7等該当下1桁の決定**
   - 0〜9からランダムに1つ選択

3. **当せん判定**
   - 各くじの番号と当せん番号を比較
   - 組番号と下N桁の一致状況から等級を判定

この方法により、実際の宝くじと同様の仕組みで抽選を再現しています。

## ライセンス

MIT License

## 要件

- Python 3.6以上
- 標準ライブラリのみ（追加のインストール不要）